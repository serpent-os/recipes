#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : plocate
version     : 1.1.23
release     : 1
homepage    : https://plocate.sesse.net
upstreams   :
    - https://plocate.sesse.net/download/plocate-1.1.23.tar.gz : 06bd3b284d5d077b441bef74edb0cc6f8e3f0a6f58b4c15ef865d3c460733783
summary     : plocate, a much faster locate
description : |
    plocate is a locate(1) based on posting lists, completely replacing mlocate with a much faster (and smaller) index. It is suitable as a default locate on your system.
license     : GPL-2.0-or-later
builddeps   :
    - pkgconfig(liburing)
    - pkgconfig(libzstd)
    - pkgconfig(systemd)
setup       : |
    %patch %(pkgdir)/plocate-fix-updatedb.timer.patch
    %meson
build       : |
    %meson_build
install     : |
    %meson_install

    %tmpfiles "f /var/lib/plocate/plocate.db 0750 root plocate"
    #sysusers "g plocate 988 - -"
    %install_file %(pkgdir)/plocate-updatedb.preset %(installroot)%(libdir)/systemd/system-preset/plocate-updatedb.preset
    %install_file %(pkgdir)/plocate.group %(installroot)%(libdir)/userdb/plocate.group
    ln -sv plocate.group %(installroot)%(libdir)/userdb/988.group
    %install_file %(pkgdir)/plocate.user %(installroot)%(libdir)/userdb/plocate.user
    chown :988 %(installroot)/usr/bin/plocate
