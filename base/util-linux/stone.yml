#
# SPDX-FileCopyrightText: Â© 2020-2023 Serpent OS Developers
#
# SPDX-License-Identifier: Zlib
#
name        : util-linux
version     : 2.37.2
release     : 3
summary     : Random collection of Linux utilities
license     :
    - BSD-3-Clause
    - BSD-4-Clause-UC
    - GPL-2.0-only
    - GPL-2.0-or-later
    - GPL-3.0-or-later
    - LGPL-2.1-or-later
    - Public-Domain
homepage    : https://www.kernel.org/pub/linux/utils/util-linux
description : |
    Random collection of Linux utilities
upstreams   :
    - https://mirrors.edge.kernel.org/pub/linux/utils/util-linux/v2.37/util-linux-2.37.2.tar.xz : 6a0764c1aae7fb607ef8a6dd2c0f6c47d5e5fd27aa08820abaad9ec14e28e9d9
builddeps   :
    - pkgconfig(libcrypt)
    - pkgconfig(libsystemd)
    - pkgconfig(ncursesw)
    - pkgconfig(pam)
    - pkgconfig(python3)
    - pkgconfig(zlib)
setup       : |
    # Can fix these issues once fakeroot is implemented
    %configure --disable-makeinstall-chown \
        --disable-makeinstall-setuid \
        --disable-static \
        --with-vendordir=%(vendordir)
build       : |
    %make
install     : |
    %make_install

    # PAM configuration
    %install_dir %(installroot)/%(vendordir)/pam.d
    %install_file %(pkgdir)/pam.d/pam-common %(installroot)/%(vendordir)/pam.d/chfn
    %install_file %(pkgdir)/pam.d/pam-common %(installroot)/%(vendordir)/pam.d/chsh
    %install_file %(pkgdir)/pam.d/pam-login %(installroot)/%(vendordir)/pam.d/login
    %install_file %(pkgdir)/pam.d/pam-runuser %(installroot)/%(vendordir)/pam.d/runuser
    %install_file %(pkgdir)/pam.d/pam-runuser %(installroot)/%(vendordir)/pam.d/runuser-l
    %install_file %(pkgdir)/pam.d/pam-su %(installroot)/%(vendordir)/pam.d/su
    %install_file %(pkgdir)/pam.d/pam-su %(installroot)/%(vendordir)/pam.d/su-l
