#
# SPDX-FileCopyrightText: Â© 2020-2024 Serpent OS Developers
#
# SPDX-License-Identifier: MPL-2.0
#
name        : xfsprogs
version     : '6.9.0'
release     : 6
homepage    : https://xfs.wiki.kernel.org/
upstreams   :
    - https://mirrors.edge.kernel.org/pub/linux/utils/fs/xfs/xfsprogs/xfsprogs-6.9.0.tar.xz : 975284783fb3fbc4e1ae640bd804d788e4237a86b07582acee86b6e48f6521b7
summary     : Filesystem utilities for xfs filesystems
description : |
    Filesystem utilities for xfs filesystems
license     :
    - GPL-2.0-or-later
    - LGPL-2.1-or-later
builddeps   :
    - binary(file)
    - binary(msgfmt)
    - pkgconfig(devmapper)
    - pkgconfig(icu-i18n)
    - pkgconfig(inih)
    - pkgconfig(libedit)
    - pkgconfig(libsystemd)
    - pkgconfig(liburcu)
    - pkgconfig(uuid)
setup       : |
    %patch %(pkgdir)/0001-Use-merged-usr-tree-layout.patch

    # Fix installing certain binaries to /sbin
    sed -i "s|root_sbindir='/sbin'|root_sbindir='/usr/sbin'|g" configure

    %configure --disable-static \
               --enable-editline=yes
build       : |
    %make
install     : |
    %make_install install install-dev -j1
    rm -v %(installroot)/usr/lib*/*.la
packages    :
    - "%(name)-devel":
        paths:
            - /usr/lib64/*.so
            - /usr/share/man/man3/*
